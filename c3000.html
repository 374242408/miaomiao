<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

	<link rel="stylesheet" href="./bootstrap/dist/css/bootstrap.min.css" />
	<!-- Font Awesome -->
	<!-- Ionicons -->
	<link rel="stylesheet" href="./Ionicons/css/ionicons.min.css" />
	<link rel="stylesheet" href="./dist/css/AdminLTE.min.css" />
	<link rel="stylesheet" href="./dist/css/skins/_all-skins.min.css" />

	<style>

		body {
			padding: 10px;
			background: #eee;
		}

		table {
		}

		td {
			padding: 0 10px 0 0px;
		}

		.small_text {
			margin-right: 3px;
		}

		.mix_td {
			max-width: 250px;
		}

		.fix_td {
			max-width: 100px;
		}

		span:nth-child(2n+1) {
			font-weight: 600;
		}

		.tr_4_24, .tr_3_18, .tr_2_12, .tr_1_6 {
			background: #daf9db;
		}

		.ball_money_percent {
			color: white;
			font-size: 10px;
			width: 30px;
			background: #3c8dbc;
			display: inline-block;
			position: relative;
			vertical-align: bottom;
			margin-right: 5px;
			text-align: center;
			margin-bottom: 12px;
		}
			.ball_money_percent span {
				position: absolute;
				bottom: -16px;
				left: 4px;
				color: #1342ad;
			}

		.box-title {
			font-size: 22px !important;
			font-weight: 600;
		}

		.form-group {
			width: 250px;
			float: left;
		}

		.box-body input {
			font-size: 20px;
		}

		th, td{
			text-align: center;
			vertical-align: middle !important;
		}

		.split_line{
			border-bottom:1px solid #333;
			width: 60px;
			margin: 0 auto;
		}
	</style>
</head>
<body>
	<div class="box box-info" style="padding:0 20px 0 5px;background:#a8e09d">
		<div class="box-header with-border">
			<h3 class="box-title">用球 / 收费表</h3><span id="time_span"></span>
		</div>
		<form class="form-horizontal">
			<div class="box-body">
				<div class="form-group">
					<label for="inputEmail3" class="col-sm-5 control-label">场地:</label>
					<div class="col-sm-6 input-group">
						<input id="inputEmail3" type="text" class="form-control" value="22.5" />
						<span class="input-group-addon">/ 小时</span>
					</div>
				</div>
				<div class="form-group">
					<label for="inputPassword3" class="col-sm-5 control-label">球:</label>
					<div class="col-sm-6 input-group">
						<input id="inputPassword3" type="text" class="form-control" value="50" />
						<span class="input-group-addon">/ 桶</span>
					</div>
				</div>
				<div class="form-group">
					<label for="total_hours" class="col-sm-5 control-label">时长:</label>
					<div class="col-sm-6 input-group">
						<input id="total_hours" type="text" class="form-control" value="2.5" />
						<span class="input-group-addon">小时</span>
					</div>
				</div>
				<div style="float:left;margin-left:20px;">
					<a href="https://zingfj.github.io/miaomiao/c2000.html" class="pull-right" style="margin-left: 20px; font-size:24px; font-weight:700">跳转表格一</a>
					<a id="init_btn" class="btn btn-success pull-right" style="padding:5px 30px 5px 30px;">确认</a>
				</div>
			</div>
		</form>
	</div>
	<div class="main-content">

	</div>
	<script src="./jquery/dist/jquery.min.js"></script>
	<script src="./bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="./jquery-slimscroll/jquery.slimscroll.min.js"></script>

	<script src="./fastclick/lib/fastclick.js"></script>
	<script src="./dist/js/adminlte.min.js"></script>


	<script>
		$(function () {

			var array = [2, 3, 4, 4];
			var per_bool = 50;
			var per_hour = 22.5;
			var hours = 2.5;
			init();

			$('#init_btn').click(function () {
				per_hour = $('#inputEmail3').val();
				per_bool = $('#inputPassword3').val();
				hours = $('#total_hours').val();

				if (per_hour === '') {
					per_hour = 22.5;
					$('#inputEmail3').val('20.1');
				}

				if (per_bool === '') {
					per_bool = 50;
					$('#inputPassword3').val('50');
				}

				if (hours === '') {
					hours = 2.5;
					$('#total_hours').val('2.5');
				}

				init();
			});


			function init() {
				$('.main-content').html('');
				for (var i = 4; i > 0; i--) {
					$('.main-content').append('<div class="box" id="box_' + i + '"><div class="box-header"><h3 class="box-title">' + i + '场地 ' + hours + '小时 = ' + (hours * i * per_hour).toFixed(1) + '</h3></div></div>');
					$('#box_' + i).append('<div class="box-body no-padding"><table class="table table-condensed" id="num' + i + '"><tr><th>人数</th><th><div class="split_line">用球</div><div>收费</div></th></tr></table></div>');
					for (var n = i * 6 + array[i - 1]; n > i * 6 - 4; n--) {
						var mon_18 = ((18.0 * n - i * per_hour * hours) * 12 / per_bool).toFixed(1);
						var mon_20 = ((20.0 * n - i * per_hour * hours) * 12 / per_bool).toFixed(1);
						$('#num' + i).append('<tr class="tr_' + i + "_" + n + '"><td>' + n + '</td><td id="ball_'+ i + '_' + n + '"></td></tr>');

						// 计算参考：平均每2.5小时一个场地使用 8 球
						// 上下波动 4--8 球
						// 排列出 i 个场地、hours 小时总共使用球数，计算不同情况收费标准
						var min_ball = (i * 10 * hours / 2.5) - 9;
						var max_ball = (i * 10 * hours / 2.5) + 16;
						
						for (var ball = min_ball; ball <= max_ball; ball++) {
							var money = ((ball * per_bool / 12 + hours * per_hour * i) / n).toFixed(1);
							var height = ball;

							if (i === 2)
								height += 7;
							if (i === 1)
								height += 14;
						
							$('#ball_' + i + '_' + n).append('<div class="ball_money_percent" style="height:'+ height + 'px">' + ball + '<span>' + money + '</span></div>');
						}
					}
				}
				var day = new Date();
				$('#time_span').html(day);
			}
		})
	</script>
</body>
</html>  